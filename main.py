import base64
exec(base64.b64decode("aW1wb3J0IHJhbmRvbQ0KaW1wb3J0IHJlcXVlc3RzDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwDQppbXBvcnQgb3MsIHNpZ25hbCwgc3lzDQpmcm9tIHB5ZmlnbGV0IGltcG9ydCBmaWdsZXRfZm9ybWF0DQpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQ0KZnJvbSByaWNoLnByb21wdCBpbXBvcnQgUHJvbXB0LCBJbnRQcm9tcHQNCmZyb20gcmljaC50ZXh0IGltcG9ydCBUZXh0DQpmcm9tIHJpY2guc3R5bGUgaW1wb3J0IFN0eWxlDQppbXBvcnQgcHlzdHlsZQ0KZnJvbSBweXN0eWxlIGltcG9ydCBDb2xvcnMsIENvbG9yYXRlDQoNCmZyb20gdGVzdCBpbXBvcnQgUGFrdW5kbw0KDQpfX0NIQU5ORUxfVVNFUk5BTUVfXyA9ICJFUkpPSE4iDQpfX0dST1VQX1VTRVJOQU1FX18gICA9ICJFUkpPSE4iDQoNCmRlZiBzaWduYWxfaGFuZGxlcihzaWcsIGZyYW1lKToNCiAgICBwcmludCgiXG4gQnllIEJ5ZS4uLiIpDQogICAgc3lzLmV4aXQoMCkNCg0KZGVmIGdyYWRpZW50X3RleHQodGV4dCwgY29sb3JzKToNCiAgICBsaW5lcyA9IHRleHQuc3BsaXRsaW5lcygpDQogICAgaGVpZ2h0ID0gbGVuKGxpbmVzKQ0KICAgIHdpZHRoID0gbWF4KGxlbihsaW5lKSBmb3IgbGluZSBpbiBsaW5lcykNCiAgICBjb2xvcmZ1bF90ZXh0ID0gVGV4dCgpDQogICAgZm9yIHksIGxpbmUgaW4gZW51bWVyYXRlKGxpbmVzKToNCiAgICAgICAgZm9yIHgsIGNoYXIgaW4gZW51bWVyYXRlKGxpbmUpOg0KICAgICAgICAgICAgaWYgY2hhciAhPSAnICc6DQogICAgICAgICAgICAgICAgY29sb3JfaW5kZXggPSBpbnQoKCh4IC8gKHdpZHRoIC0gMSBpZiB3aWR0aCA+IDEgZWxzZSAxKSkgKyAoeSAvIChoZWlnaHQgLSAxIGlmIGhlaWdodCA+IDEgZWxzZSAxKSkpICogMC41ICogKGxlbihjb2xvcnMpIC0gMSkpDQogICAgICAgICAgICAgICAgY29sb3JfaW5kZXggPSBtaW4obWF4KGNvbG9yX2luZGV4LCAwKSwgbGVuKGNvbG9ycykgLSAxKSAgIyBFbnN1cmUgdGhlIGluZGV4IGlzIHdpdGhpbiBib3VuZHMNCiAgICAgICAgICAgICAgICBzdHlsZSA9IFN0eWxlKGNvbG9yPWNvbG9yc1tjb2xvcl9pbmRleF0pDQogICAgICAgICAgICAgICAgY29sb3JmdWxfdGV4dC5hcHBlbmQoY2hhciwgc3R5bGU9c3R5bGUpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGNvbG9yZnVsX3RleHQuYXBwZW5kKGNoYXIpDQogICAgICAgIGNvbG9yZnVsX3RleHQuYXBwZW5kKCJcbiIpDQogICAgcmV0dXJuIGNvbG9yZnVsX3RleHQNCg0KZGVmIGJhbm5lcihjb25zb2xlKToNCiAgICBvcy5zeXN0ZW0oJ2NscycgaWYgb3MubmFtZSA9PSAnbnQnIGVsc2UgJ2NsZWFyJykNCiAgICBicmFuZF9uYW1lID0gZmlnbGV0X2Zvcm1hdCgnRVJKT0hOJywgZm9udD0nYmxvb2R5JykNCiAgICBjb2xvcnMgPSBbDQogICAgICAgICJyZ2IoMjU1LDAsMCkiLCAicmdiKDI1NSw2OSwwKSIsICJyZ2IoMjU1LDE0MCwwKSIsICJyZ2IoMjU1LDIxNSwwKSIsICJyZ2IoMTczLDI1NSw0NykiLCANCiAgICAgICAgInJnYigwLDI1NSwwKSIsICJyZ2IoMCwyNTUsMjU1KSIsICJyZ2IoMCwxOTEsMjU1KSIsICJyZ2IoMCwwLDI1NSkiLCAicmdiKDEzOSwwLDI1NSkiLA0KICAgICAgICAicmdiKDI1NSwwLDI1NSkiDQogICAgXQ0KICAgIGNvbG9yZnVsX3RleHQgPSBncmFkaWVudF90ZXh0KGJyYW5kX25hbWUsIGNvbG9ycykNCiAgICBjb25zb2xlLnByaW50KGNvbG9yZnVsX3RleHQpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdcdCAgICAgICAgIPCdkI/wnZCL8J2QhPCdkIDwnZCS8J2QhCDwnZCL8J2QjvCdkIbwnZCO8J2QlPCdkJMg8J2QhfCdkJHwnZCO8J2QjCDwnZCC8J2Qj/CdkIwg8J2QgfCdkITwnZCF8J2QjvCdkJHwnZCEIPCdkJTwnZCS8J2QiPCdkI3wnZCGIPCdkJPwnZCH8J2QiPCdkJIg8J2Qk/CdkI7wnZCO8J2QiycpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICcgICAg8J2QkvCdkIfwnZCA8J2QkfCdkIjwnZCN8J2QhiDwnZCT8J2Qh/CdkIQg8J2QgPCdkILwnZCC8J2QhPCdkJLwnZCSIPCdkIrwnZCE8J2QmCDwnZCI8J2QkiDwnZCN8J2QjvCdkJMg8J2QgPCdkIvwnZCL8J2QjvCdkJbwnZCE8J2QgyDwnZCA8J2QjfCdkIMg8J2QlvCdkIjwnZCL8J2QiyDwnZCB8J2QhCDwnZCB8J2Qi/CdkI7wnZCC8J2QivCdkITwnZCDJykpIA0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnICAgICAg8J2QgvCdkI7wnZCN8J2Qk/CdkIDwnZCC8J2QkyDwnZCM8J2QhCDwnZCT8J2QjiDwnZCB8J2QlPCdkJgg8J2QlPCdkI3wnZCL8J2QiPCdkIzwnZCI8J2Qk/CdkITwnZCDIPCdkIHwnZCA8J2Qi/CdkIDwnZCN8J2QgvCdkIQg8J2Qk/CdkIYgQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30nKSkgDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZicg4oCMICAgICAgICAgICDwnZCT8J2QnvCdkKXwnZCe8J2QoPCdkKvwnZCa8J2QpjogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30g8J2QjvCdkKsgQHtfX0dST1VQX1VTRVJOQU1FX199JykpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KDQpkZWYgbG9hZF9wbGF5ZXJfZGF0YShjcG0pOg0KICAgIHJlc3BvbnNlID0gY3BtLmdldF9wbGF5ZXJfZGF0YSgpDQogICAgaWYgcmVzcG9uc2UuZ2V0KCdvaycpOg0KICAgICAgICBkYXRhID0gcmVzcG9uc2UuZ2V0KCdkYXRhJykNCiAgICAgICAgaWYgJ2Zsb2F0cycgaW4gZGF0YSBhbmQgJ2xvY2FsSUQnIGluIGRhdGEgYW5kICdtb25leScgaW4gZGF0YSBhbmQgJ2NvaW4nIGluIGRhdGE6DQogICAgICAgIA0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZic9PT09PT09PT09WyB7X19DSEFOTkVMX1VTRVJOQU1FX199IF09PT09PT09PT09JykpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnTmFtZSAgIDogeyhkYXRhLmdldCgiTmFtZSIpIGlmICJOYW1lIiBpbiBkYXRhIGVsc2UgIlVOREVGSU5FRCIpfS4nKSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnTG9jYWxJRDoge2RhdGEuZ2V0KCJsb2NhbElEIil9LicpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ01vbmV5ICA6IHtkYXRhLmdldCgibW9uZXkiKX0uJykpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnQ29pbnMgIDoge2RhdGEuZ2V0KCJjb2luIil9LicpKQ0KICAgICAgICAgICAgDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnISBFUlJPUjogbmV3IGFjY291bnRzIG1vc3QgYmUgc2lnbmVkLWluIHRvIHRoZSBnYW1lIGF0IGxlYXN0IG9uY2UgIS4nKSkNCiAgICAgICAgICAgIGV4aXQoMSkNCiAgICBlbHNlOg0KICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnISBFUlJPUjogc2VlbXMgbGlrZSB5b3VyIGxvZ2luIGlzIG5vdCBwcm9wZXJseSBzZXQgIS4nKSkNCiAgICAgICAgZXhpdCgxKQ0KDQoNCmRlZiBsb2FkX2tleV9kYXRhKGNwbSk6DQoNCiAgICBkYXRhID0gY3BtLmdldF9rZXlfZGF0YSgpDQogICAgDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZic9PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT0nKSkNCiAgICANCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ0FjY2VzcyBLZXkgOiB7ZGF0YS5nZXQoImFjY2Vzc19rZXkiKX0uJykpDQogICAgDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUZWxlZ3JhbSBJRDoge2RhdGEuZ2V0KCJ0ZWxlZ3JhbV9pZCIpfS4nKSkNCiAgICANCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ0JhbGFuY2UgJCAgOiB7KGRhdGEuZ2V0KCJjb2lucyIpIGlmIG5vdCBkYXRhLmdldCgiaXNfdW5saW1pdGVkIikgZWxzZSAiVW5saW1pdGVkIil9LicpKQ0KICAgICAgICANCiAgICANCg0KZGVmIHByb21wdF92YWxpZF92YWx1ZShjb250ZW50LCB0YWcsIHBhc3N3b3JkPUZhbHNlKToNCiAgICB3aGlsZSBUcnVlOg0KICAgICAgICB2YWx1ZSA9IFByb21wdC5hc2soY29udGVudCwgcGFzc3dvcmQ9cGFzc3dvcmQpDQogICAgICAgIGlmIG5vdCB2YWx1ZSBvciB2YWx1ZS5pc3NwYWNlKCk6DQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ3t0YWd9IGNhbm5vdCBiZSBlbXB0eSBvciBqdXN0IHNwYWNlcy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiB2YWx1ZQ0KICAgICAgICAgICAgDQpkZWYgbG9hZF9jbGllbnRfZGV0YWlscygpOg0KICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCJodHRwOi8vaXAtYXBpLmNvbS9qc29uIikNCiAgICBkYXRhID0gcmVzcG9uc2UuanNvbigpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZic9PT09PT09PT09PT09WyB7X19DSEFOTkVMX1VTRVJOQU1FX199IF09PT09PT09PT09PT09JykpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidJcCBBZGRyZXNzIDoge2RhdGEuZ2V0KCJxdWVyeSIpfS4nKSkNCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ0xvY2F0aW9uICAgOiB7ZGF0YS5nZXQoImNpdHkiKX0ge2RhdGEuZ2V0KCJyZWdpb25OYW1lIil9IHtkYXRhLmdldCgiY291bnRyeUNvZGUiKX0uJykpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidDb3VudHJ5ICAgIDoge2RhdGEuZ2V0KCJjb3VudHJ5Iil9IHtkYXRhLmdldCgiemlwIil9LicpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT09PT09PT09WyB7X19DSEFOTkVMX1VTRVJOQU1FX199IF09PT09PT09PT09PT09PT0nKSkNCg0KZGVmIGludGVycG9sYXRlX2NvbG9yKHN0YXJ0X2NvbG9yLCBlbmRfY29sb3IsIGZyYWN0aW9uKToNCiAgICBzdGFydF9yZ2IgPSB0dXBsZShpbnQoc3RhcnRfY29sb3JbaTppKzJdLCAxNikgZm9yIGkgaW4gKDEsIDMsIDUpKQ0KICAgIGVuZF9yZ2IgPSB0dXBsZShpbnQoZW5kX2NvbG9yW2k6aSsyXSwgMTYpIGZvciBpIGluICgxLCAzLCA1KSkNCiAgICBpbnRlcnBvbGF0ZWRfcmdiID0gdHVwbGUoaW50KHN0YXJ0ICsgZnJhY3Rpb24gKiAoZW5kIC0gc3RhcnQpKSBmb3Igc3RhcnQsIGVuZCBpbiB6aXAoc3RhcnRfcmdiLCBlbmRfcmdiKSkNCiAgICByZXR1cm4gIns6MDJ4fXs6MDJ4fXs6MDJ4fSIuZm9ybWF0KCppbnRlcnBvbGF0ZWRfcmdiKQ0KDQpkZWYgcmFpbmJvd19ncmFkaWVudF9zdHJpbmcoY3VzdG9tZXJfbmFtZSk6DQogICAgbW9kaWZpZWRfc3RyaW5nID0gIiINCiAgICBudW1fY2hhcnMgPSBsZW4oY3VzdG9tZXJfbmFtZSkNCiAgICBzdGFydF9jb2xvciA9ICJ7OjA2eH0iLmZvcm1hdChyYW5kb20ucmFuZGludCgwLCAweEZGRkZGRikpDQogICAgZW5kX2NvbG9yID0gIns6MDZ4fSIuZm9ybWF0KHJhbmRvbS5yYW5kaW50KDAsIDB4RkZGRkZGKSkNCiAgICBmb3IgaSwgY2hhciBpbiBlbnVtZXJhdGUoY3VzdG9tZXJfbmFtZSk6DQogICAgICAgIGZyYWN0aW9uID0gaSAvIG1heChudW1fY2hhcnMgLSAxLCAxKQ0KICAgICAgICBpbnRlcnBvbGF0ZWRfY29sb3IgPSBpbnRlcnBvbGF0ZV9jb2xvcihzdGFydF9jb2xvciwgZW5kX2NvbG9yLCBmcmFjdGlvbikNCiAgICAgICAgbW9kaWZpZWRfc3RyaW5nICs9IGYnW3tpbnRlcnBvbGF0ZWRfY29sb3J9XXtjaGFyfScNCiAgICByZXR1cm4gbW9kaWZpZWRfc3RyaW5nDQoNCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6DQogICAgY29uc29sZSA9IENvbnNvbGUoKQ0KICAgIHNpZ25hbC5zaWduYWwoc2lnbmFsLlNJR0lOVCwgc2lnbmFsX2hhbmRsZXIpDQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgYmFubmVyKGNvbnNvbGUpDQogICAgICAgIGFjY19lbWFpbCA9IHByb21wdF92YWxpZF92YWx1ZSgiW2JvbGRdWz9dIEFjY291bnQgRW1haWxbL2JvbGRdIiwgIkVtYWlsIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgIGFjY19wYXNzd29yZCA9IHByb21wdF92YWxpZF92YWx1ZSgiW2JvbGRdWz9dIEFjY291bnQgUGFzc3dvcmRbL2JvbGRdIiwgIlBhc3N3b3JkIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgIGFjY19hY2Nlc3Nfa2V5ID0gcHJvbXB0X3ZhbGlkX3ZhbHVlKCJbYm9sZF1bP10gQWNjZXNzIEtleVsvYm9sZF0iLCAiQWNjZXNzIEtleSIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCBjeWFuXVslXSBUcnlpbmcgdG8gTG9naW5bL2JvbGQgY3lhbl06ICIsIGVuZD1Ob25lKQ0KICAgICAgICBjcG0gPSBQYWt1bmRvKGFjY19hY2Nlc3Nfa2V5KQ0KICAgICAgICBsb2dpbl9yZXNwb25zZSA9IGNwbS5sb2dpbihhY2NfZW1haWwsIGFjY19wYXNzd29yZCkNCiAgICAgICAgaWYgbG9naW5fcmVzcG9uc2UgIT0gMDoNCiAgICAgICAgICAgIGlmIGxvZ2luX3Jlc3BvbnNlID09IDEwMDoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnQUNDT1VOVCBOT1QgRk9VTkQuJykpDQogICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBsb2dpbl9yZXNwb25zZSA9PSAxMDE6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1dST05HIFBBU1NXT1JELicpKQ0KICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgbG9naW5fcmVzcG9uc2UgPT0gMTAzOg0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdJTlZBTElEIEFDQ0VTUyBLRVkuJykpDQogICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnVFJZIEFHQUlOLicpKQ0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICchIE5vdGU6IG1ha2Ugc3VyZSB5b3UgZmlsbGVkIG91dCB0aGUgZmllbGRzICEuJykpDQogICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwuJykpDQogICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICB3aGlsZSBUcnVlOg0KICAgICAgICAgICAgYmFubmVyKGNvbnNvbGUpDQogICAgICAgICAgICBsb2FkX3BsYXllcl9kYXRhKGNwbSkNCiAgICAgICAgICAgIGxvYWRfa2V5X2RhdGEoY3BtKQ0KICAgICAgICAgICAgbG9hZF9jbGllbnRfZGV0YWlscygpDQogICAgICAgICAgICBjaG9pY2VzID0gWyIwIiwgIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5IiwgIjEwIiwgIjExIiwgIjEyIiwgIjEzIiwgIjE0IiwgIjE1IiwgIjE2IiwgIjE3IiwgIjE4IiwgIjE5IiwgIjIwIiwgIjIxIiwgIjIyIiwgIjIzIiwgIjI0IiwgIjI1IiwgIjI2IiwgIjI3IiwgIjI4IiwgIjI5IiwgIjMwIiwgIjMxIiwgIjMyIl0NCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MDF9OiBJbmNyZWFzZSBNb25leSAgICAgICAgICAgMS41SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swMn06IEluY3JlYXNlIENvaW5zICAgICAgICAgICA0LjVLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezAzfTogS2luZyBSYW5rICAgICAgICAgICAgICAgIDhLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezA0fTogQ2hhbmdlIElEICAgICAgICAgICAgICAgIDQuNUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MDV9OiBDaGFuZ2UgTmFtZSAgICAgICAgICAgICAgMTAwJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezA2fTogQ2hhbmdlIE5hbWUgKFJhaW5ib3cpICAgIDEwMCcpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swN306IE51bWJlciBQbGF0ZXMgICAgICAgICAgICAySycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swOH06IEFjY291bnQgRGVsZXRlICAgICAgICAgICBGUkVFJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezA5fTogQWNjb3VudCBSZWdpc3RlciAgICAgICAgIEZSRUUnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTB9OiBEZWxldGUgRnJpZW5kcyAgICAgICAgICAgNTAwJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezExfTogVW5sb2NrIFBhaWQgQ2FycyAgICAgICAgIDVrJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezEyfTogVW5sb2NrIGFsbCBDYXJzICAgICAgICAgIDZLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezEzfTogVW5sb2NrIGFsbCBDYXJzIFNpcmVuICAgIDMuNUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTR9OiBVbmxvY2sgdzE2IEVuZ2luZSAgICAgICAgNEsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTV9OiBVbmxvY2sgQWxsIEhvcm5zICAgICAgICAgM0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTZ9OiBVbmxvY2sgRGlzYWJsZSBEYW1hZ2UgICAgM0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTd9OiBVbmxvY2sgVW5saW1pdGVkIEZ1ZWwgICAgM0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTh9OiBVbmxvY2sgSG91c2UgMyAgICAgICAgICAgNEsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MTl9OiBVbmxvY2sgU21va2UgICAgICAgICAgICAgNEsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjB9OiBVbmxvY2sgV2hlZWxzICAgICAgICAgICAgNEsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjF9OiBVbmxvY2sgQW5pbWF0aW9ucyAgICAgICAgMksnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjJ9OiBVbmxvY2sgRXF1aXBhbWVudHMgTSAgICAgM0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjN9OiBVbmxvY2sgRXF1aXBhbWVudHMgRiAgICAgM0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjR9OiBDaGFuZ2UgUmFjZSBXaW5zICAgICAgICAgMUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjV9OiBDaGFuZ2UgUmFjZSBMb3NlcyAgICAgICAgMUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MjZ9OiBDbG9uZSBBY2NvdW50ICAgICAgICAgICAgN0snKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7Mjd9OiBDdXN0b20gSFAgICAgICAgICAgICAgICAgMi41SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3syOH06IEN1c3RvbSBBbmdsZSAgICAgICAgICAgICAxLjVLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezI5fTogQ3VzdG9tIFRpcmUgYnVybmVyICAgICAgIDEuNUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MzB9OiBDdXN0b20gQ2FyIE1pbGxhZ2UgICAgICAgMksnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MzF9OiBDdXN0b20gQ2FyIEJyYWtlICAgICAgICAgMksnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MzJ9OiBDaGFuZ2UgQWNjb3VudCBFbWFpbCAgICAgMksnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MH0gOiBFeGl0JykpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT09PT09PT09WyB7X19DSEFOTkVMX1VTRVJOQU1FX199IF09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2VydmljZSA9IEludFByb21wdC5hc2soZiJbYm9sZF1bP10gU2VsZWN0IGEgU2VydmljZSBbcmVkXVsxLXtjaG9pY2VzWy0xXX0gb3IgMF1bL3JlZF1bL2JvbGRdIiwgY2hvaWNlcz1jaG9pY2VzLCBzaG93X2Nob2ljZXM9RmFsc2UpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT09PT09PT09WyB7X19DSEFOTkVMX1VTRVJOQU1FX199IF09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgc2VydmljZSA9PSAwOg0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZWw6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE6ICMgSW5jcmVhc2UgTW9uZXkNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWz9dIEluc2VydCBob3cgbXVjaCBtb25leSBkbyB5b3Ugd2FudC4nKSkNCiAgICAgICAgICAgICAgICBhbW91bnQgPSBJbnRQcm9tcHQuYXNrKCJbP10gQW1vdW50IikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gU2F2aW5nIHlvdXIgZGF0YTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgYW1vdW50ID4gMCBhbmQgYW1vdW50IDw9IDUwMDAwMDAwMDoNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfbW9uZXkoYW1vdW50KToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdXNlIHZhbGlkIHZhbHVlcy4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyOg0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbP10gSW5zZXJ0IGhvdyBtdWNoIGNvaW5zIGRvIHlvdSB3YW50LicpKQ0KICAgICAgICAgICAgICAgIGFtb3VudCA9IEludFByb21wdC5hc2soIls/XSBBbW91bnQiKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBTYXZpbmcgeW91ciBkYXRhOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBhbW91bnQgPiAwIGFuZCBhbW91bnQgPD0gNTAwMDAwOg0KICAgICAgICAgICAgICAgICAgICBpZiBjcG0uc2V0X3BsYXllcl9jb2lucyhhbW91bnQpOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDM6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgcmVkXVshXSBOb3RlOlsvYm9sZCByZWRdOiBpZiB0aGUga2luZyByYW5rIGRvZXNuJ3QgYXBwZWFyIGluIGdhbWUsIGNsb3NlIGl0IGFuZCBvcGVuIGZldyB0aW1lcy4iLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdWyFdIE5vdGU6Wy9ib2xkIHJlZF06IHBsZWFzZSBkb24ndCBkbyBLaW5nIFJhbmsgb24gc2FtZSBhY2NvdW50IHR3aWNlLiIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIEdpdmluZyB5b3UgYSBLaW5nIFJhbms6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX3JhbmsoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gNDoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWz9dIEVudGVyIHlvdXIgbmV3IElELicpKQ0KICAgICAgICAgICAgICAgIG5ld19pZCA9IFByb21wdC5hc2soIls/XSBJRCIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFNhdmluZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGxlbihuZXdfaWQpID49IDAgYW5kIGxlbihuZXdfaWQpIDw9IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTkgYW5kICgnICcgaW4gbmV3X2lkKSA9PSBGYWxzZToNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfbG9jYWxpZChuZXdfaWQudXBwZXIoKSk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHVzZSB2YWxpZCBJRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSA1Og0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbP10gRW50ZXIgeW91ciBuZXcgTmFtZS4nKSkNCiAgICAgICAgICAgICAgICBuZXdfbmFtZSA9IFByb21wdC5hc2soIls/XSBOYW1lIikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gU2F2aW5nIHlvdXIgZGF0YTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgbGVuKG5ld19uYW1lKSA+PSAwIGFuZCBsZW4obmV3X25hbWUpIDw9IDk5OTk5OTk5OToNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfbmFtZShuZXdfbmFtZSk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHVzZSB2YWxpZCB2YWx1ZXMuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gNjoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWz9dIEVudGVyIHlvdXIgbmV3IFJhaW5ib3cgTmFtZS4nKSkNCiAgICAgICAgICAgICAgICBuZXdfbmFtZSA9IFByb21wdC5hc2soIls/XSBOYW1lIikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gU2F2aW5nIHlvdXIgZGF0YTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgbGVuKG5ld19uYW1lKSA+PSAwIGFuZCBsZW4obmV3X25hbWUpIDw9IDk5OTk5OTk5OToNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfbmFtZShyYWluYm93X2dyYWRpZW50X3N0cmluZyhuZXdfbmFtZSkpOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDc6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIEdpdmluZyB5b3UgYSBOdW1iZXIgUGxhdGVzOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uc2V0X3BsYXllcl9wbGF0ZXMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gODoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIEFmdGVyIGRlbGV0aW5nIHlvdXIgYWNjb3VudCB0aGVyZSBpcyBubyBnb2luZyBiYWNrICEhLicpKQ0KICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRGVsZXRlIHRoaXMgQWNjb3VudCA/ISIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6DQogICAgICAgICAgICAgICAgICAgIGNwbS5kZWxldGUoKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDk6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBSZWdpc3RyaW5nIG5ldyBBY2NvdW50LicpKQ0KICAgICAgICAgICAgICAgIGFjYzJfZW1haWwgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIls/XSBBY2NvdW50IEVtYWlsIiwgIkVtYWlsIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgICAgICAgICAgYWNjMl9wYXNzd29yZCA9IHByb21wdF92YWxpZF92YWx1ZSgiWz9dIEFjY291bnQgUGFzc3dvcmQiLCAiUGFzc3dvcmQiLCBwYXNzd29yZD1GYWxzZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gQ3JlYXRpbmcgbmV3IEFjY291bnQ6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIHN0YXR1cyA9IGNwbS5yZWdpc3RlcihhY2MyX2VtYWlsLCBhY2MyX3Bhc3N3b3JkKQ0KICAgICAgICAgICAgICAgIGlmIHN0YXR1cyA9PSAwOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidJTkZPOiBJbiBvcmRlciB0byB0d2VhayB0aGlzIGFjY291bnQgd2l0aCB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAneW91IG1vc3Qgc2lnbi1pbiB0byB0aGUgZ2FtZSB1c2luZyB0aGlzIGFjY291bnQuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxpZiBzdGF0dXMgPT0gMTA1Og0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnVGhpcyBlbWFpbCBpcyBhbHJlYWR5IGV4aXN0cyAhLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDEwOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBEZWxldGluZyB5b3VyIEZyaWVuZHM6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5kZWxldGVfcGxheWVyX2ZyaWVuZHMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMTE6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyFdIE5vdGU6IHRoaXMgZnVuY3Rpb24gdGFrZXMgYSB3aGlsZSB0byBjb21wbGV0ZSwgcGxlYXNlIGRvbid0IGNhbmNlbC4iLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIEFsbCBQYWlkIENhcnM6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfcGFpZF9jYXJzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDEyOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgQWxsIENhcnM6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfYWxsX2NhcnMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMTM6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBBbGwgQ2FycyBTaXJlbjogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19hbGxfY2Fyc19zaXJlbigpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxNDoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIHcxNiBFbmdpbmU6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfdzE2KCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE1Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgQWxsIEhvcm5zOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX2hvcm5zKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE2Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgRGlzYWJsZSBEYW1hZ2U6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5kaXNhYmxlX2VuZ2luZV9kYW1hZ2UoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMTc6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBVbmxpbWl0ZWQgRnVlbDogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubGltaXRlZF9mdWVsKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE4Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgSG91c2UgMzogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19ob3VzZXMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMTk6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBTbW9rZTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19zbW9rZSgpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyMDoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIFdoZWVsczogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja193aGVlbHMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjE6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBBbmltYXRpb25zOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX2FuaW1hdGlvbnMoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjI6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBFcXVpcGFtZW50cyBNYWxlOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX2VxdWlwbWVudHNfbWFsZSgpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyMzoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIEVxdWlwYW1lbnRzIEZlbWFsZTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19lcXVpcG1lbnRzX2ZlbWFsZSgpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyNDoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIEluc2VydCBob3cgbXVjaCByYWNlcyB5b3Ugd2luLicpKQ0KICAgICAgICAgICAgICAgIGFtb3VudCA9IEludFByb21wdC5hc2soIls/XSBBbW91bnQiKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBDaGFuZ2luZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGFtb3VudCA+IDAgYW5kIGFtb3VudCA8PSA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX3dpbnMoYW1vdW50KToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gUGxlYXNlIHVzZSB2YWxpZCB2YWx1ZXMuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjU6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBJbnNlcnQgaG93IG11Y2ggcmFjZXMgeW91IGxvc2UuJykpDQogICAgICAgICAgICAgICAgYW1vdW50ID0gSW50UHJvbXB0LmFzaygiWz9dIEFtb3VudCIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIENoYW5naW5nIHlvdXIgZGF0YTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgYW1vdW50ID4gMCBhbmQgYW1vdW50IDw9IDk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OToNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfbG9zZXMoYW1vdW50KToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIFBsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBQbGVhc2UgdXNlIHZhbGlkIHZhbHVlcy4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyNjoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIFBsZWFzZSBFbnRlciBBY2NvdW50IERldGFsaXMuJykpDQogICAgICAgICAgICAgICAgdG9fZW1haWwgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIls/XSBBY2NvdW50IEVtYWlsIiwgIkVtYWlsIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgICAgICAgICAgdG9fcGFzc3dvcmQgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIls/XSBBY2NvdW50IFBhc3N3b3JkIiwgIlBhc3N3b3JkIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIENsb25pbmcgeW91ciBhY2NvdW50OiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uYWNjb3VudF9jbG9uZSh0b19lbWFpbCwgdG9fcGFzc3dvcmQpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOiAgICAgDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gVEhBVCBSRUNJRVZFUiBBQ0NPVU5UIElTIEdNQUlMIFBBU1NXT1JEIElTIE5PVCBWQUxJRCBPUiBUSEFUIEFDQ09VTlQgSVMgTk9UIFJFR0lTVEVSRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjc6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgeWVsbG93XVshXSBOb3RlWy9ib2xkIHllbGxvd106IG9yaWdpbmFsIHNwZWVkIGNhbiBub3QgYmUgcmVzdG9yZWQhLiIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgY3lhbl1bIV0gRW50ZXIgQ2FyIERldGFpbHMuWy9ib2xkIGN5YW5dIikNCiAgICAgICAgICAgICAgICBjYXJfaWQgPSBJbnRQcm9tcHQuYXNrKCJbYm9sZF1bP10gQ2FyIElkWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgbmV3X2hwID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dRW50ZXIgTmV3IEhQWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgbmV3X2lubmVyX2hwID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dRW50ZXIgTmV3IElubmVyIEhwWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgbmV3X25tID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dRW50ZXIgTmV3IFRvcnF1ZVsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIG5ld190b3JxdWUgPSBJbnRQcm9tcHQuYXNrKCJbYm9sZF1bP11FbnRlciBOZXcgTk1bL2JvbGRdIikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCBjeWFuXVslXSBIYWNraW5nIENhciBTcGVlZFsvYm9sZCBjeWFuXToiLGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5oYWNrX2Nhcl9zcGVlZChjYXJfaWQsIG5ld19ocCwgbmV3X2lubmVyX2hwLCBuZXdfbm0sIG5ld190b3JxdWUpOg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCBncmVlbl1TVUNDRVNGVUwgKOKclClbL2JvbGQgZ3JlZW5dIikNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0iKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gUGxlYXNlIHVzZSB2YWxpZCB2YWx1ZXMuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjg6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBFTlRFUiBDQVIgREVUQUxJUycpKQ0KICAgICAgICAgICAgICAgIGNhcl9pZCA9IEludFByb21wdC5hc2soIltib2xkXVs/XSBDQVIgSURbL2JvbGRdIikNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIEVOVEVSIFNURUVSSU5HIEFOR0xFJykpDQogICAgICAgICAgICAgICAgY3VzdG9tID0gSW50UHJvbXB0LmFzaygiW3JlZF1bP13vu79FTlRFUiBUSEUgQU1PVU5UIE9GIEFOR0xFIFlPVSBXQU5UWy9yZWRdIikgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW3JlZF1bJV0gSEFDS0lORyBDQVIgQU5HTEVbL3JlZF06ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5tYXhfbWF4MShjYXJfaWQsIGN1c3RvbSk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbcmVkXVs/XSBETyBZT1UgV0FOVCBUTyBFWElUWy9yZWRdID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogY29uc29sZS5wcmludCgiVEhBTksgWU9VIEZPUiBVU0lORyBPVVIgVE9PTCIpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUExFQVNFIFRSWSBBR0FJTicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDI5Og0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gRU5URVIgQ0FSIERFVEFMSVMnKSkNCiAgICAgICAgICAgICAgICBjYXJfaWQgPSBJbnRQcm9tcHQuYXNrKCJbYm9sZF1bP10gQ0FSIElEWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBFTlRFUiBQRVJDRU5UQUdFJykpDQogICAgICAgICAgICAgICAgY3VzdG9tID0gSW50UHJvbXB0LmFzaygiW3BpbmtdWz9d77u/RU5URVIgUEVSQ0VOVEFHRSBUSVJFUyBVIFdBTlRbL3BpbmtdIikgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW3JlZF1bJV0gU2V0dGluZyBQZXJjZW50YWdlIFsvcmVkXTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLm1heF9tYXgyKGNhcl9pZCwgY3VzdG9tKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIltib2xkIGdyZWVuXVs/XSBETyBZT1UgV0FOVCBUTyBFWElUWy9ib2xkIGdyZWVuXSA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IGNvbnNvbGUucHJpbnQoIlRIQU5LIFlPVSBGT1IgVVNJTkcgT1VSIFRPT0wiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BMRUFTRSBUUlkgQUdBSU4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAzMDoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZF1FTlRFUiBDQVIgREVUQUlMUyFbL2JvbGRdIikNCiAgICAgICAgICAgICAgICBjYXJfaWQgPSBJbnRQcm9tcHQuYXNrKCJbYm9sZF1bP10gQ0FSIElEWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGRdRU5URVIgTkVXIE1JTExBR0UhWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY3VzdG9tID0gSW50UHJvbXB0LmFzaygiW2JvbGQgYmx1ZV1bP13vu79FTlRFUiBNSUxMQUdFIFUgV0FOVFsvYm9sZCBibHVlXSIpICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIHJlZF1bJV0gU2V0dGluZyBQZXJjZW50YWdlIFsvYm9sZCByZWRdOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0ubWlsbGFnZV9jYXIoY2FyX2lkLCBjdXN0b20pOg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCBncmVlbl1TVUNDRVNTRlVMICjinJQpWy9ib2xkIGdyZWVuXSIpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbYm9sZF1bP10gRE8gWU9VIFdBTlQgVE8gRVhJVFsvYm9sZF0gPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBjb25zb2xlLnByaW50KCJUSEFOSyBZT1UgRk9SIFVTSU5HIE9VUiBUT09MIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVEJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQTEVBU0UgVFJZIEFHQUlOJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMzE6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGRdRU5URVIgQ0FSIERFVEFJTFMhWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY2FyX2lkID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dIENBUiBJRFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkXUVOVEVSIE5FVyBCUkFLRSFbL2JvbGRdIikNCiAgICAgICAgICAgICAgICBjdXN0b20gPSBJbnRQcm9tcHQuYXNrKCJbYm9sZCBibHVlXVs/Xe+7v0VOVEVSIEJSQUtFIFUgV0FOVFsvYm9sZCBibHVlXSIpICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIHJlZF1bJV0gU2V0dGluZyBCUkFLRSBbL2JvbGQgcmVkXTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLmJyYWtlX2NhcihjYXJfaWQsIGN1c3RvbSk6DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIGdyZWVuXVNVQ0NFU1NGVUwgKOKclClbL2JvbGQgZ3JlZW5dIikNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIltib2xkXVs/XSBETyBZT1UgV0FOVCBUTyBFWElUWy9ib2xkXSA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IGNvbnNvbGUucHJpbnQoIlRIQU5LIFlPVSBGT1IgVVNJTkcgT1VSIFRPT0wiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BMRUFTRSBUUlkgQUdBSU4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAzMjoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZF1FbnRlciBOZXcgRW1haWwhWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgbmV3X2VtYWlsID0gcHJvbXB0X3ZhbGlkX3ZhbHVlKCJbYm9sZCBjeWFuXVs/XSBBY2NvdW50IE5ldyBFbWFpbFsvYm9sZCBjeWFuXSIsICJFbWFpbCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoDQogICAgICAgICAgICAgICAgICAgICAgIltib2xkIHJlZF1DWy9ib2xkIHJlZF1bYm9sZCBkYXJrX29yYW5nZV1IWy9ib2xkIGRhcmtfb3JhbmdlXVtib2xkIHllbGxvd11BWy9ib2xkIHllbGxvd10iDQogICAgICAgICAgICAgICAgICAgICAgIltib2xkIGdyZWVuXU5bL2JvbGQgZ3JlZW5dW2JvbGQgY3lhbl1HWy9ib2xkIGN5YW5dW2JvbGQgYmx1ZV1JWy9ib2xkIGJsdWVdIg0KICAgICAgICAgICAgICAgICAgICAgICJbYm9sZCBtYWdlbnRhXU5bL2JvbGQgbWFnZW50YV1bYm9sZCB2aW9sZXRdR1svYm9sZCB2aW9sZXRdICINCiAgICAgICAgICAgICAgICAgICAgICAiW2JvbGQgcmVkXUVbL2JvbGQgcmVkXVtib2xkIGRhcmtfb3JhbmdlXU1bL2JvbGQgZGFya19vcmFuZ2VdW2JvbGQgeWVsbG93XUFbL2JvbGQgeWVsbG93XSINCiAgICAgICAgICAgICAgICAgICAgICAiW2JvbGQgZ3JlZW5dSVsvYm9sZCBncmVlbl1bYm9sZCBjeWFuXUxbL2JvbGQgY3lhbl1bYm9sZCBibHVlXS5bL2JvbGQgYmx1ZV0iDQogICAgICAgICAgICAgICAgICAgICAgIltib2xkIG1hZ2VudGFdLlsvYm9sZCBtYWdlbnRhXVtib2xkIHZpb2xldF0uWy9ib2xkIHZpb2xldF0iLA0KICAgICAgICAgICAgICAgICAgICAgICBlbmQ9IiIpDQogICAgICAgICAgICAgICAgaWYgY3BtLmNoYW5nZV9lbWFpbChuZXdfZW1haWwpOg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJcbltib2xkIGdyZWVuXVNVQ0NFU1NGVUwgKOKclClbL2JvbGQgZ3JlZW5dIikNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIltib2xkXVs/XSBETyBZT1UgV0FOVCBUTyBFWElUWy9ib2xkXSA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IGNvbnNvbGUucHJpbnQoIltib2xkXVRoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2xbL2JvbGRdIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJcbltib2xkIHJlZF1GQUlMRURbL2JvbGQgcmVkXSIpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkXUVNQUlMIElTIEFMUkVBRFkgUkVHSVNURVJFRFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZSAgICAgICAgDQogICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgYnJlYWs="))